[common]
platform = espressif32
framework = arduino
platform_version = ~6.3.2
lib_ldf_mode = deep

; Common build flags
build_flags = 
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    ; Include paths
    -I include
    -I src

; Common lib dependencies
lib_deps =
    sensirion/Sensirion I2C SEN66 @ ^1.2.0
    Wire
    SPI

[env:development]
extends = common
board = lilygo-t-display-s3
board_build.flash_mode = qio
board_build.flash_size = 16MB
board_build.psram_type = opi
board_build.f_flash = 80000000L
board_build.f_cpu = 240000000L
monitor_speed = 115200
monitor_filters = direct, esp32_exception_decoder
build_type = debug
build_flags = 
    ${common.build_flags}
    -DCORE_DEBUG_LEVEL=5
    -DDEBUG_MODE
    -DDEBUG_SENSIRION
board_build.partitions = huge_app.csv

[env:production]
extends = common
board = lilygo-t-display-s3
board_build.flash_mode = qio
board_build.flash_size = 16MB
board_build.psram_type = opi
board_build.f_flash = 80000000L
board_build.f_cpu = 240000000L
monitor_speed = 115200
monitor_filters = direct
build_type = release
build_flags = 
    ${common.build_flags}
    -DCORE_DEBUG_LEVEL=0
    -O3
    -DNDEBUG
board_build.partitions = huge_app.csv

; Optional: Only enable if you need OTA updates
;[env:production_ota]
;extends = env:production
;upload_protocol = espota
;upload_port = <device-ip-address>
;build_flags = 
;    ${env:production.build_flags}
;    -DENABLE_OTA 